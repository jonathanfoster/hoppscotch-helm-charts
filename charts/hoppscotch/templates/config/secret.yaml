{{- if not .Values.existingSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "hoppscotch.fullname" . }}
  namespace: {{ include "hoppscotch.namespace" . | quote }}
  labels:
    app.kubernetes.io/component: hoppscotch
    {{- include "hoppscotch.labels" . | nindent 4 }}
  {{- if .Values.commonAnnotations }}
  annotations:
    {{- toYaml .Values.commonAnnotations | nindent 4 }}
  {{- end }}
type: Opaque
data:
  {{- with .Values.hoppscotch.backend }}
  DATABASE_URL: {{ include "hoppscotch.secret.databaseUrl" $ | b64enc | quote }}
  JWT_SECRET: {{ include "hoppscotch.secret.jwtSecret" $ | b64enc | quote }}
  SESSION_SECRET: {{ include "hoppscotch.secret.sessionSecret" $ | b64enc | quote }}
  DATA_ENCRYPTION_KEY: {{ include "hoppscotch.secret.dataEncryptionKey" $ | b64enc | quote }}
  GOOGLE_CLIENT_ID: {{ .auth.google.clientId | b64enc | quote }}
  GOOGLE_CLIENT_SECRET: {{ .auth.google.clientSecret | b64enc | quote }}
  GITHUB_CLIENT_ID: {{ .auth.github.clientId | b64enc | quote }}
  GITHUB_CLIENT_SECRET: {{ .auth.github.clientSecret | b64enc | quote }}
  MICROSOFT_CLIENT_ID: {{ .auth.microsoft.clientId | b64enc | quote }}
  MICROSOFT_CLIENT_SECRET: {{ .auth.microsoft.clientSecret | b64enc | quote }}
  MAILER_SMTP_URL: {{ .mailer.smtpUrl | b64enc | quote }}
  MAILER_SMTP_USER: {{ .mailer.smtpUser | b64enc | quote }}
  MAILER_SMTP_PASSWORD: {{ .mailer.smtpPassword | b64enc | quote }}
  ENTERPRISE_LICENSE_KEY: {{ .enterpriseLicenseKey | b64enc | quote }}
  SAML_CERT: {{ .auth.saml.cert | b64enc | quote }}
  OIDC_CLIENT_ID: {{ .auth.oidc.clientId | b64enc | quote }}
  OIDC_CLIENT_SECRET: {{ .auth.oidc.clientSecret | b64enc | quote }}
  CLICKHOUSE_USER: {{ include "hoppscotch.secret.clickhouseUser" $ | b64enc | quote }}
  CLICKHOUSE_PASSWORD: {{ include "hoppscotch.secret.clickhousePassword" $ | b64enc | quote }}
  REDIS_URL: {{ include "hoppscotch.secret.redisUrl" $ | b64enc | quote }}
  {{- end }}
{{- end }}
